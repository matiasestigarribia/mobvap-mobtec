{% extends "base.html" %}

{% block content %}

<section x-data="{ isSubmitting: false }" class="py-16 px-6 sm:px-8 lg:px-12 bg-gradient-to-b from-slate-50 to-white">
    <div class="max-w-2xl mx-auto">

        <!-- Form Card -->
        <div
            class="bg-white p-8 rounded-xl shadow-lg border border-slate-100 border-t-4 border-t-blue-600 border-l-2 border-l-blue-600/50 border-r-2 border-r-blue-600/50 border-b-2 border-b-blue-600/50">
            <form action="" method="POST" @submit="isSubmitting = true" class="space-y-6">

                {% csrf_token %}

                <div>
                    <label for="nome" class="block text-sm font-semibold text-slate-900 mb-2">Seu Nome</label>
                    <div>
                        <input type="text" name="nome" id="nome" required
                            class="block w-full rounded-lg border-2 border-slate-200 px-4 py-3 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:outline-none transition-all text-slate-900">
                    </div>
                </div>

                <div>
                    <label for="comentario" class="block text-sm font-semibold text-slate-900 mb-2">Seu
                        Comentário</label>
                    <div>
                        <textarea rows="4" name="comentario" id="comentario" required maxlength="900"
                            class="block w-full rounded-lg border-2 border-slate-200 px-4 py-3 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:outline-none transition-all text-slate-900"></textarea>
                    </div>
                </div>

                <div>
                    <button type="submit" :disabled="isSubmitting"
                        class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 disabled:opacity-50 transition-all">

                        <svg x-show="isSubmitting" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>

                        <span x-show="!isSubmitting">Enviar Comentário</span>
                    </button>
                </div>
            </form>
        </div>

    </div>
</section>

<section class="py-16 px-6 sm:px-8 lg:px-12">
    <div class="max-w-screen-2xl mx-auto">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 items-stretch">
            {% for comment in page_obj %}

            {% if comment.comment_status == 'approved' %}

            <div
                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl hover:shadow-blue-600/10 transition-all duration-300 border border-slate-100 border-t-4 border-t-blue-600 border-l-2 border-l-blue-600/50 border-r-2 border-r-blue-600/50 border-b-2 border-b-blue-600/50">
                <h3 class="font-bold text-xl text-slate-900 mb-3">{{ comment.comment_author }}</h3>
                <p class="text-slate-600 mb-4 leading-relaxed">
                    {{ comment.comment_text }}
                </p>
                <p class="text-xs text-slate-400 font-medium">
                    Postado em: {{ comment.created_at }}
                </p>
            </div>

            {% endif %}

            {% endfor %}
        </div>
    </div>
</section>

<div class="mt-12">
    {% include 'components/pagination.html' %}
</div>

{% endblock %}